---
title: "Lab 01: CS631"
subtitle: "Working in R"
author: "Alison Hill"
output:
  xaringan::moon_reader:
    css: ["default", "css/ohsu.css", "css/ohsu-fonts.css"]
    lib_dir: libs
    nature:
      highlightStyle: atelier-lakeside-light
      highlightLines: true
      countIncrementalSlides: false
---

<script src="/rmarkdown-libs/header-attrs/header-attrs.js"></script>
<link href="/rmarkdown-libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<script src="/rmarkdown-libs/anchor-sections/anchor-sections.js"></script>


<div id="r-basics" class="section level2">
<h2>R Basics</h2>
<p>‚Äì</p>
<ul>
<li>R is an interpreter (<code>&gt;</code>)</li>
</ul>
<p>‚Äì</p>
<ul>
<li>Name objects in R (<code>i_like_snake_case &lt;-</code>)</li>
</ul>
<p>‚Äì</p>
<ul>
<li>Know your object types (<code>typeof()</code>)</li>
</ul>
<p>‚Äì</p>
<ul>
<li>Case matters (<code>my_names != My_names</code>)</li>
</ul>
<p>‚Äì</p>
<ul>
<li>Use comments! (<code># use the hashtag symbol</code>)</li>
</ul>
<p>‚Äì</p>
<ul>
<li>Functions (<code>fun</code>!)</li>
</ul>
<p>‚Äì</p>
<ul>
<li>Use packages (<em>‚Äúinstall once per machine, load once per R session‚Äù</em>)</li>
</ul>
<p>‚Äì</p>
<ul>
<li>Use the <code>%&gt;%</code> (<em>‚Äúdataframe first, dataframe once‚Äù</em>)</li>
</ul>
<hr />
</div>
<div id="r-is-an-interpreter" class="section level2">
<h2>R is an interpreter <code>&gt;</code></h2>
<p>‚Äì</p>
<p>You enter commands line-by-line (as opposed to compiled languages).</p>
<p>‚Äì</p>
<ul>
<li>The <code>&gt;</code> means R is a ready for a command</li>
</ul>
<p>‚Äì</p>
<ul>
<li>The <code>+</code> means your last command isn‚Äôt complete</li>
</ul>
<p>‚Äì</p>
<pre><code>- If you get stuck with a `+` use your escape key!</code></pre>
</div>
<div id="name-your-own-objects" class="section level2">
<h2>Name your own objects</h2>
<pre class="r"><code>us &lt;- c(&quot;Steven&quot;, &quot;Jackie&quot;, &quot;Alison&quot;) # combine strings
us</code></pre>
<pre><code>[1] &quot;Steven&quot; &quot;Jackie&quot; &quot;Alison&quot;</code></pre>
<p>‚Äì</p>
<pre class="r"><code>num_labs &lt;- c(1:10) # combine numbers
num_labs</code></pre>
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>‚Äì</p>
<pre class="r"><code>mood &lt;- rep(&quot;yippee&quot;, length(num_labs)) # replicate 10 times
mood</code></pre>
<pre><code> [1] &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot;
 [9] &quot;yippee&quot; &quot;yippee&quot;</code></pre>
<hr />
</div>
<div id="re-name-others-objects" class="section level2">
<h2>Re-name others‚Äô objects</h2>
<pre class="r"><code>my_alpha &lt;- letters # built-in, no package needed
my_alpha</code></pre>
<pre><code> [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;j&quot; &quot;k&quot; &quot;l&quot; &quot;m&quot; &quot;n&quot; &quot;o&quot; &quot;p&quot; &quot;q&quot; &quot;r&quot; &quot;s&quot;
[20] &quot;t&quot; &quot;u&quot; &quot;v&quot; &quot;w&quot; &quot;x&quot; &quot;y&quot; &quot;z&quot;</code></pre>
<p>‚Äì</p>
<pre class="r"><code>my_names &lt;- babynames # from the babynames package
my_names</code></pre>
<pre><code># A tibble: 1,924,665 x 5
    year sex   name          n   prop
   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;     &lt;int&gt;  &lt;dbl&gt;
 1  1880 F     Mary       7065 0.0724
 2  1880 F     Anna       2604 0.0267
 3  1880 F     Emma       2003 0.0205
 4  1880 F     Elizabeth  1939 0.0199
 5  1880 F     Minnie     1746 0.0179
 6  1880 F     Margaret   1578 0.0162
 7  1880 F     Ida        1472 0.0151
 8  1880 F     Alice      1414 0.0145
 9  1880 F     Bertha     1320 0.0135
10  1880 F     Sarah      1288 0.0132
# ‚Ä¶ with 1,924,655 more rows</code></pre>
<hr />
</div>
<div id="what-to-name-objects" class="section level2">
<h2>What to name objects?</h2>
<pre class="r"><code>?make.names</code></pre>
<p>.pull-left[
Object names cannot:</p>
<ul>
<li>Start with a number</li>
<li>Contain a space</li>
<li>Contain <a href="http://stat.ethz.ch/R-manual/R-devel/library/base/html/Reserved.html">‚Äúreserved‚Äù words</a>
]</li>
</ul>
<p>‚Äì</p>
<p>.pull-right[
Object names must:</p>
<ul>
<li>Start with a letter</li>
<li>Contain letters, numbers, <code>_</code> and <code>.</code>
]</li>
</ul>
<hr />
</div>
<div id="adopt-a-consistent-naming-style" class="section level2">
<h2>Adopt a consistent naming style</h2>
<pre class="r"><code>i_use_snake_case # recommended
otherPeopleUseCamelCase
some.people.use.periods
And_aFew.People_RENOUNCEconvention</code></pre>
<p>From: <a href="http://r4ds.had.co.nz/workflow-basics.html#whats-in-a-name" class="uri">http://r4ds.had.co.nz/workflow-basics.html#whats-in-a-name</a></p>
<p>Read more:
<a href="http://style.tidyverse.org/syntax.html#object-names" class="uri">http://style.tidyverse.org/syntax.html#object-names</a></p>
</div>
<div id="know-your-data-types" class="section level2">
<h2>Know your data types</h2>
<ul>
<li>Numeric (2 subtypes)
<ul>
<li>Integers (<code>1, 50</code>)</li>
<li>Double (<code>1.5, 50.25</code>, <code>?double</code>)</li>
</ul></li>
<li>Character (<code>"hello"</code>)</li>
<li>Factor (<code>grade = "A" | grade = "B"</code>)</li>
<li>Logical (<code>TRUE | FALSE</code>)</li>
</ul>
<p>‚Äì</p>
<pre class="r"><code>typeof(num_labs) # numeric</code></pre>
<pre><code>[1] &quot;integer&quot;</code></pre>
<pre class="r"><code>typeof(mood) # &quot;yippee&quot; is a character</code></pre>
<pre><code>[1] &quot;character&quot;</code></pre>
<pre class="r"><code>typeof(mood == &quot;yippee&quot;) # is mood equal to &quot;yippee&quot;- T or F?</code></pre>
<pre><code>[1] &quot;logical&quot;</code></pre>
<hr />
</div>
<div id="characters-can-be-deceiving" class="section level2">
<h2>Characters can be deceiving</h2>
<pre class="r"><code>my_things &lt;- c(num_labs, mood)
my_things</code></pre>
<pre><code> [1] &quot;1&quot;      &quot;2&quot;      &quot;3&quot;      &quot;4&quot;      &quot;5&quot;      &quot;6&quot;      &quot;7&quot;      &quot;8&quot;     
 [9] &quot;9&quot;      &quot;10&quot;     &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot;
[17] &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot; &quot;yippee&quot;</code></pre>
<p>‚Äì</p>
<pre class="r"><code>typeof(my_things) </code></pre>
<pre><code>[1] &quot;character&quot;</code></pre>
<hr />
</div>
<div id="na-is-special" class="section level2">
<h2><code>NA</code> is special</h2>
<pre class="r"><code>num_labs &lt;- c(num_labs, NA) </code></pre>
<p>‚Äì</p>
<pre class="r"><code>typeof(num_labs)</code></pre>
<pre><code>[1] &quot;integer&quot;</code></pre>
<p>‚Äì</p>
<pre class="r"><code>num_labs*3</code></pre>
<pre><code> [1]  3  6  9 12 15 18 21 24 27 30 NA</code></pre>
<pre class="r"><code>max(num_labs)</code></pre>
<pre><code>[1] NA</code></pre>
<pre class="r"><code>max(num_labs, na.rm = TRUE)</code></pre>
<pre><code>[1] 10</code></pre>
</div>
<div id="case-matters" class="section level2">
<h2>Case matters</h2>
<p>This works:</p>
<pre class="r"><code>glimpse(babynames)</code></pre>
<pre><code>Rows: 1,924,665
Columns: 5
$ year &lt;dbl&gt; 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880, 1880‚Ä¶
$ sex  &lt;chr&gt; &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;, &quot;F&quot;,‚Ä¶
$ name &lt;chr&gt; &quot;Mary&quot;, &quot;Anna&quot;, &quot;Emma&quot;, &quot;Elizabeth&quot;, &quot;Minnie&quot;, &quot;Margaret&quot;, &quot;Ida&quot;‚Ä¶
$ n    &lt;int&gt; 7065, 2604, 2003, 1939, 1746, 1578, 1472, 1414, 1320, 1288, 1258‚Ä¶
$ prop &lt;dbl&gt; 0.07238359, 0.02667896, 0.02052149, 0.01986579, 0.01788843, 0.01‚Ä¶</code></pre>
<p>‚Äì</p>
<p>These do not:</p>
<pre class="r"><code>Glimpse(babynames) # no function</code></pre>
<pre><code>Error in Glimpse(babynames): could not find function &quot;Glimpse&quot;</code></pre>
<pre class="r"><code>glimpse(Babynames) # no data </code></pre>
<pre><code>Error in glimpse(Babynames): object &#39;Babynames&#39; not found</code></pre>
</div>
<div id="text-behind-a-is-a-comment" class="section level2">
<h2>Text behind a <code>#</code> is a comment</h2>
<pre class="r"><code>num_labs + 2 # add 2 here</code></pre>
<pre><code> [1]  3  4  5  6  7  8  9 10 11 12 NA</code></pre>
<pre class="r"><code>num_weeks &lt;- num_labs + 2 # save as new object</code></pre>
<p>‚Äì</p>
<pre class="r"><code># I can say anything I want here...
num_weeks</code></pre>
<pre><code> [1]  3  4  5  6  7  8  9 10 11 12 NA</code></pre>
<p>‚Äì</p>
<pre class="r"><code>but not here</code></pre>
<pre><code>Error: &lt;text&gt;:1:5: unexpected symbol
1: but not
        ^</code></pre>
<p>background-image: url(‚Äú../images/Slide06.png‚Äù)
background-size: cover</p>
<p>background-image: url(‚Äú../images/Slide08.png‚Äù)
background-size: cover</p>
</div>
<div id="functions" class="section level2">
<h2>Functions</h2>
<p>Sometimes abbreviated <code>funs</code> in documentation, which is a little ironic üòâ.</p>
<p>Functions can come from:</p>
<ul>
<li>base R (these functions are ‚Äúbuilt in‚Äù)</li>
<li>packages</li>
<li>you</li>
</ul>
<p>class: middle</p>
</div>
<div id="functions-from-packages" class="section level1">
<h1>Functions from Packages</h1>
<pre class="r"><code>babynames %&gt;% count(sex) # count is from dplyr</code></pre>
<pre><code># A tibble: 2 x 2
  sex         n
  &lt;chr&gt;   &lt;int&gt;
1 F     1138293
2 M      786372</code></pre>
</div>
<div id="function-help" class="section level1">
<h1>Function help</h1>
<pre class="r"><code>?seq
?count</code></pre>
<p>Pay attention to:</p>
<p>‚Äì</p>
<ul>
<li>Usage <em>(recipe)</em></li>
</ul>
<p>‚Äì</p>
<ul>
<li>Arguments <em>(ingredients)</em></li>
</ul>
<p>‚Äì</p>
<ul>
<li>Examples</li>
</ul>
<p>‚Äì</p>
<p>Read more:
- <a href="http://r4ds.had.co.nz/workflow-basics.html#calling-functions" class="uri">http://r4ds.had.co.nz/workflow-basics.html#calling-functions</a>
- <a href="http://socviz.co/appendix.html#a-little-more-about-r" class="uri">http://socviz.co/appendix.html#a-little-more-about-r</a>
- <a href="http://stat545.com/block011_write-your-own-function-01.html" class="uri">http://stat545.com/block011_write-your-own-function-01.html</a>
- <a href="http://stat545.com/block011_write-your-own-function-02.html" class="uri">http://stat545.com/block011_write-your-own-function-02.html</a>
- <a href="http://stat545.com/block011_write-your-own-function-03.html" class="uri">http://stat545.com/block011_write-your-own-function-03.html</a></p>
<div id="packages" class="section level2">
<h2>Packages!</h2>
<p><em>Install once</em> per machine</p>
<pre class="r"><code>install.packages(&quot;dplyr&quot;)</code></pre>
<p>‚Äì</p>
<p><em>Load once</em> per R work session</p>
<pre class="r"><code>library(dplyr)</code></pre>
<p>‚Äì</p>
<p><em>also: quotes matter, sorry</em></p>
<p>class: inverse, middle, center</p>
<p><img src="https://www.tidyverse.org/images/hex-tidyverse.png" width="25%" style="display: block; margin: auto;" /></p>
<p><em>‚ÄúThe tidyverse is an opinionated collection of R packages designed for data science. All packages share an underlying design philosophy, grammar, and data structures.‚Äù</em></p>
<pre class="r"><code>install.packages(&quot;tidyverse&quot;)
library(tidyverse)</code></pre>
<p>See packages included here: <a href="https://www.tidyverse.org/packages/" class="uri">https://www.tidyverse.org/packages/</a></p>
<p>class: middle</p>
<p><em>Nesting</em> a dataframe inside a function is hard to read.</p>
<pre class="r"><code>slice(babynames, 1)</code></pre>
<pre><code># A tibble: 1 x 5
   year sex   name      n   prop
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;
1  1880 F     Mary   7065 0.0724</code></pre>
<p>‚Äì</p>
<p>Here, the ‚Äúsentence‚Äù starts with a <font color="#ED1941">verb</font>.</p>
<p>‚Äì</p>
<hr>
<p><em>Piping</em> a dataframe into a function lets you read L to R</p>
<pre class="r"><code>babynames %&gt;% slice(1)</code></pre>
<pre><code># A tibble: 1 x 5
   year sex   name      n   prop
  &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt;  &lt;dbl&gt;
1  1880 F     Mary   7065 0.0724</code></pre>
<p>‚Äì</p>
<p>Now, the ‚Äúsentence‚Äù starts with a <font color="#ED1941">noun</font>.</p>
<p>class: inverse, middle, center</p>
<p><img src="https://www.rstudio.com/wp-content/uploads/2014/04/magrittr.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
<div id="dataframe-first-dataframe-once" class="section level2">
<h2>‚Äúdataframe first, dataframe once‚Äù</h2>
<p>class: inverse, middle, center</p>
</div>
<div id="i-know" class="section level2">
<h2>I know‚Ä¶</h2>
<p><img src="https://media.giphy.com/media/uEhLWy2eu87Ly/source.gif" /></p>
<p>class: inverse, middle, center</p>
</div>
</div>
<div id="section" class="section level1">
<h1>üèÉüèΩ</h1>
<div id="resources-for-working-in-r" class="section level2">
<h2>Resources for Working in R:</h2>
<p><a href="http://r4ds.had.co.nz/workflow-basics.html" class="uri">http://r4ds.had.co.nz/workflow-basics.html</a></p>
<p><a href="http://moderndive.com/2-getting-started.html" class="uri">http://moderndive.com/2-getting-started.html</a></p>
<p><a href="https://bookdown.org/chesterismay/rbasics/3-rstudiobasics.html" class="uri">https://bookdown.org/chesterismay/rbasics/3-rstudiobasics.html</a></p>
<p><a href="https://github.com/rstudio/cheatsheets/blob/master/rstudio-ide.pdf" class="uri">https://github.com/rstudio/cheatsheets/blob/master/rstudio-ide.pdf</a></p>
<hr />
</div>
<div id="install-load-multiple-r-packages" class="section level2">
<h2>Install &amp; load multiple R packages</h2>
<p>This can get to be a long list if we want to use a lot of new packages in our work session. We can make a function to load a <em>list</em> of packages, and install them if not already installed (more on functions later).</p>
<pre class="r"><code>pkgs &lt;- c(&quot;readr&quot;, &quot;dplyr&quot;, &quot;tidyr&quot;) # list packages needed</code></pre>
<p>‚Äì</p>
<pre class="r"><code>ipak &lt;- function(pkg){
    new.pkg &lt;- pkg[!(pkg %in% installed.packages()[, &quot;Package&quot;])]
    if (length(new.pkg)) 
        install.packages(new.pkg, dependencies = TRUE)
    sapply(pkg, require, character.only = TRUE)
}</code></pre>
<p>‚Äì</p>
<pre class="r"><code>ipak(pkgs) # take function, and give it that list</code></pre>
<p>Function from: <a href="https://gist.github.com/stevenworthington/3178163" class="uri">https://gist.github.com/stevenworthington/3178163</a></p>
</div>
</div>
